<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="David Kincaid">
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>BaseApplication - qtstrap</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "BaseApplication";
    var mkdocs_page_input_path = "quickstart/baseapplication.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> qtstrap</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <p class="caption"><span class="caption-text">Overview</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="#">Quickstart</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../installation/">Installation</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../gettingstarted/">Getting Started</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">BaseApplication</a>
    <ul class="current">
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../basemainwindow/">BaseMainWindow</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Project Structure</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../structure/structure/">Project Structure</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../structure/makefile/">Makefile</a>
                </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">qtstrap</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Quickstart &raquo;</li>
        
      
        
          <li>Overview &raquo;</li>
        
      
    
    <li>BaseApplication</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/qtstrap/qtstrap/edit/master/docs/quickstart/baseapplication.md"> Edit on qtstrap/qtstrap</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="baseapplication">BaseApplication</h1>
<p><code>BaseApplication</code> is a subclass of <code>QApplication</code>, adding several behaviors that address shortcomings of the Qt/PySide2/PyQt environment.</p>
<h1 id="ctrlc-handler">Ctrl+C Handler</h1>
<p>Due to the way that the thin layer of python interacts with the Qt libraries underneath, a naked PySide2/PyQt application can't be stopped using ctrl+c like a normal program. I find this extremely annoying. </p>
<p>The solution to this has two parts. Part 1 is to use the python <code>signal</code> library to bind a function to the SIGINT signal. Unfortunately, this isn't enough, because in order for signal handler to fire, the python interpreter needs to get some cpu time. Once you start the Qt interpreter using <code>app.exec_()</code>, execution passes down into Qt's C++ code and doesn't return until the application exits. Thus, we need to artifically secure some runtime for the python interpreter.</p>
<p>This is part 2: creating a <code>QTimer</code> that triggers every 10ms(the exact time is not important) and calls an empty python function, <code>update()</code>. When the timer triggers and <code>update()</code> is called, execution is passed back to the python interpreter, giving it a chance to process signals. </p>
<pre><code class="language-py">def init_ctrlc_handler(self):            
    # grab the keyboard interrupt signal 
    signal.signal(signal.SIGINT, self.ctrlc_handler)

    # empty timer callback
    def update():
        pass

    # create timer to force python interpreter to get some runtime
    self.timer = QTimer() # create a QTimer
    self.timer.timeout.connect(update) # connect to our empty timer callback
    self.timer.start(10) # set the timer to trigger every 10mS
</code></pre>
<h1 id="app-info">App Info</h1>
<p>Several Qt modules can automatically query the running <code>QApplication</code> for a number of attributes:</p>
<ul>
<li>organizationName</li>
<li>organizationDomain</li>
<li>applicationName</li>
<li>applicationVersion</li>
</ul>
<p>One example is <code>QSettings</code>, which "provides persistent, platform-independent application settings". Using <code>QSettings</code> reqires an applicationName and an organizationName. </p>
<pre><code class="language-py"># every time you want to access QSettings, yuck
settings = QSettings('Organization', 'Application')
</code></pre>
<p>However, if you give this information to your <code>QApplication</code>, then <code>QSettings</code> will use those values so you don't have to specify them every time.</p>
<pre><code class="language-py"># once, at startup
app = QApplication()
app.setOrganizationName('Organization')
app.setApplicationName('Application')

# every time you want to access QSettings, much better!
settings = QSettings()
</code></pre>
<p>As a side bonus, a <code>QMainWindow</code> will automatically set its window title attribute to the <code>QApplication</code>'s <code>applicationName</code>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../basemainwindow/" class="btn btn-neutral float-right" title="BaseMainWindow">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../gettingstarted/" class="btn btn-neutral" title="Getting Started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../gettingstarted/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../basemainwindow/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
